<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README-UPDATE-TODO
  
    &mdash; Documentation by YARD 0.9.38
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README-UPDATE-TODO";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README-UPDATE-TODO</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'><h1 id="readme-updates-todo-list">README Updates TODO List</h1>

<p><strong>Date:</strong> December 20, 2025<br>
<strong>Task:</strong> Update “The <code>*-merge</code> Gem Family” section in all gem READMEs</p>

<h2 id="issues-to-fix">Issues to Fix</h2>

<h3 id="1-incorrect-backend-attribution">1. Incorrect Backend Attribution</h3>

<p><strong>Problem:</strong> Current table shows prism-merge, psych-merge, rbs-merge, and dotenv-merge using tree_haver<br>
<strong>Reality:</strong> These gems use their native parsers directly, NOT via tree_haver</p>

<ul>
  <li>❌ Current: <code>[Prism][prism] (via tree_haver)</code>
</li>
  <li>✅ Correct: <code>[Prism][prism]</code>
</li>
</ul>

<h3 id="2-toml-merge-backend-description">2. toml-merge Backend Description</h3>

<p><strong>Problem:</strong> Table only mentions tree-sitter-toml<br>
<strong>Reality:</strong> toml-merge supports multiple backends via tree_haver, with citrus + toml-rb as the <strong>default</strong> (pure Ruby, works on all platforms)</p>

<ul>
  <li>❌ Current: <code>[tree-sitter-toml][ts-toml] (via tree_haver)</code>
</li>
  <li>✅ Correct: <code>[Citrus + toml-rb][toml-rb] (default), [tree-sitter-toml][ts-toml] (via tree_haver)</code>
</li>
</ul>

<h3 id="3-missing-section-in-some-gems">3. Missing Section in Some Gems</h3>

<p><strong>Problem:</strong> kettle-dev, kettle-jem, and tree_haver are missing the section entirely</p>

<ul>
  <li>kettle-dev: ❌ Missing</li>
  <li>kettle-jem: ❌ Missing</li>
  <li>tree_haver: ❌ Missing</li>
</ul>

<h3 id="4-table-format-inconsistency">4. Table Format Inconsistency</h3>

<p><strong>Problem:</strong> Some gems have 3-column table, others have 4-column table<br>
<strong>Solution:</strong> All should use 4-column table (Gem, Format, Parser Backend(s), Description)</p>

<h2 id="corrected-table-content">Corrected Table Content</h2>

<pre class="code language-markdown"><code class="language-markdown">### The `*-merge` Gem Family

The `*-merge` gem family provides intelligent, AST-based merging for various file formats. At the foundation is [tree_haver][tree_haver], which provides a unified cross-Ruby parsing API that works seamlessly across MRI, JRuby, and TruffleRuby.

| Gem | Format | Parser Backend(s) | Description |
|-----|--------|-------------------|-------------|
| [tree_haver][tree_haver] | Multi | MRI C, Rust, FFI, Java, Prism, Psych, Commonmarker, Markly, Citrus | **Foundation**: Cross-Ruby adapter for parsing libraries (like Faraday for HTTP) |
| [ast-merge][ast-merge] | Text | internal | **Infrastructure**: Shared base classes and merge logic for all `*-merge` gems |
| [prism-merge][prism-merge] | Ruby | [Prism][prism] | Smart merge for Ruby source files |
| [psych-merge][psych-merge] | YAML | [Psych][psych] | Smart merge for YAML files |
| [json-merge][json-merge] | JSON | [tree-sitter-json][ts-json] (via tree_haver) | Smart merge for JSON files |
| [jsonc-merge][jsonc-merge] | JSONC | [tree-sitter-json][ts-json] (via tree_haver) | ⚠️ Proof of concept; Smart merge for JSON with Comments |
| [bash-merge][bash-merge] | Bash | [tree-sitter-bash][ts-bash] (via tree_haver) | Smart merge for Bash scripts |
| [rbs-merge][rbs-merge] | RBS | [RBS][rbs] | Smart merge for Ruby type signatures |
| [dotenv-merge][dotenv-merge] | Dotenv | internal | Smart merge for `.env` files |
| [toml-merge][toml-merge] | TOML | [Citrus + toml-rb][toml-rb] (default), [tree-sitter-toml][ts-toml] (via tree_haver) | Smart merge for TOML files |
| [markdown-merge][markdown-merge] | Markdown | [Commonmarker][commonmarker] / [Markly][markly] (via tree_haver) | **Foundation**: Shared base for Markdown mergers with inner code block merging |
| [markly-merge][markly-merge] | Markdown | [Markly][markly] (via tree_haver) | Smart merge for Markdown (CommonMark via cmark-gfm C) |
| [commonmarker-merge][commonmarker-merge] | Markdown | [Commonmarker][commonmarker] (via tree_haver) | Smart merge for Markdown (CommonMark via comrak Rust) |

**Example implementations** for the gem templating use case:

| Gem | Purpose | Description |
|-----|---------|-------------|
| [kettle-dev][kettle-dev] | Gem Development | Gem templating tool using `*-merge` gems |
| [kettle-jem][kettle-jem] | Gem Templating | Gem template library with smart merge support |

[tree_haver]: https://github.com/kettle-rb/tree_haver
[ast-merge]: https://github.com/kettle-rb/ast-merge
[prism-merge]: https://github.com/kettle-rb/prism-merge
[psych-merge]: https://github.com/kettle-rb/psych-merge
[json-merge]: https://github.com/kettle-rb/json-merge
[jsonc-merge]: https://github.com/kettle-rb/jsonc-merge
[bash-merge]: https://github.com/kettle-rb/bash-merge
[rbs-merge]: https://github.com/kettle-rb/rbs-merge
[dotenv-merge]: https://github.com/kettle-rb/dotenv-merge
[toml-merge]: https://github.com/kettle-rb/toml-merge
[markdown-merge]: https://github.com/kettle-rb/markdown-merge
[markly-merge]: https://github.com/kettle-rb/markly-merge
[commonmarker-merge]: https://github.com/kettle-rb/commonmarker-merge
[kettle-dev]: https://github.com/kettle-rb/kettle-dev
[kettle-jem]: https://github.com/kettle-rb/kettle-jem
[prism]: https://github.com/ruby/prism
[psych]: https://github.com/ruby/psych
[ts-json]: https://github.com/tree-sitter/tree-sitter-json
[ts-bash]: https://github.com/tree-sitter/tree-sitter-bash
[ts-toml]: https://github.com/tree-sitter-grammars/tree-sitter-toml
[rbs]: https://github.com/ruby/rbs
[toml-rb]: https://github.com/emancu/toml-rb
[markly]: https://github.com/ioquatix/markly
[commonmarker]: https://github.com/gjtorikian/commonmarker
</code></pre>

<h2 id="files-to-update">Files to Update</h2>

<h3 id="root-project">Root Project</h3>
<ul class="task-list">
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>/home/pboling/src/kettle-rb/ast-merge/README.md</code> - Update table</li>
</ul>

<h3 id="-merge-gems-11-total">*-merge Gems (11 total)</h3>
<ul class="task-list">
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>vendor/bash-merge/README.md</code> - Update table</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>vendor/commonmarker-merge/README.md</code> - Update table</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>vendor/dotenv-merge/README.md</code> - Update table</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>vendor/json-merge/README.md</code> - Update table</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>vendor/jsonc-merge/README.md</code> - Update table</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>vendor/markdown-merge/README.md</code> - Update table</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>vendor/markly-merge/README.md</code> - Update table</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>vendor/prism-merge/README.md</code> - Update table</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>vendor/psych-merge/README.md</code> - Update table</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>vendor/rbs-merge/README.md</code> - Update table</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>vendor/toml-merge/README.md</code> - Update table</li>
</ul>

<h3 id="support-gems-3-total">Support Gems (3 total)</h3>
<ul class="task-list">
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>vendor/kettle-dev/README.md</code> - <strong>ADD SECTION</strong>
</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>vendor/kettle-jem/README.md</code> - <strong>ADD SECTION</strong>
</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled><code>vendor/tree_haver/README.md</code> - <strong>ADD SECTION</strong>
</li>
</ul>

<h3 id="excluded-2-gems---as-per-requirements">Excluded (2 gems - as per requirements)</h3>
<ul>
  <li>⚪ <code>vendor/kettle-soup-cover/README.md</code> - SKIP (per requirements)</li>
  <li>⚪ <code>vendor/kettle-test/README.md</code> - SKIP (per requirements)</li>
</ul>

<h2 id="key-changes-summary">Key Changes Summary</h2>

<h3 id="backend-attribution-changes">Backend Attribution Changes</h3>

<table>
  <thead>
    <tr>
      <th>Gem</th>
      <th>OLD</th>
      <th>NEW</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>prism-merge</td>
      <td><code>[Prism][prism] (via tree_haver)</code></td>
      <td><code>[Prism][prism]</code></td>
    </tr>
    <tr>
      <td>psych-merge</td>
      <td><code>[Psych][psych] (via tree_haver)</code></td>
      <td><code>[Psych][psych]</code></td>
    </tr>
    <tr>
      <td>rbs-merge</td>
      <td><code>[RBS][rbs]</code></td>
      <td>
<code>[RBS][rbs]</code> ✓ (already correct)</td>
    </tr>
    <tr>
      <td>dotenv-merge</td>
      <td><code>internal ([dotenv][dotenv])</code></td>
      <td><code>internal</code></td>
    </tr>
    <tr>
      <td>toml-merge</td>
      <td><code>[tree-sitter-toml][ts-toml] (via tree_haver)</code></td>
      <td><code>[Citrus + toml-rb][toml-rb] (default), [tree-sitter-toml][ts-toml] (via tree_haver)</code></td>
    </tr>
  </tbody>
</table>

<h3 id="link-references-to-add">Link References to Add</h3>

<p>Need to add this link reference in all files:</p>
<pre class="code language-markdown"><code class="language-markdown">[toml-rb]: https://github.com/emancu/toml-rb
</code></pre>

<p>Need to REMOVE these link references (no longer used):</p>
<pre class="code language-markdown"><code class="language-markdown">[dotenv]: https://github.com/bkeepers/dotenv
[ts-jsonc]: https://gitlab.com/WhyNotHugo/tree-sitter-jsonc
</code></pre>

<h2 id="implementation-plan">Implementation Plan</h2>

<ol>
  <li>✅ Create this TODO document</li>
  <li>⏳ Update root ast-merge/README.md</li>
  <li>⏳ Update all 11 *-merge gem READMEs</li>
  <li>⏳ Add section to kettle-dev/README.md</li>
  <li>⏳ Add section to kettle-jem/README.md</li>
  <li>⏳ Add section to tree_haver/README.md</li>
  <li>⏳ Verify all changes</li>
  <li>⏳ Create summary document</li>
</ol>

<h2 id="total-files-15">Total Files: 15</h2>

<ul>
  <li>1 root README</li>
  <li>11 *-merge gem READMEs</li>
  <li>3 support gem READMEs (adding section)</li>
</ul>

<hr>

<p><strong>Status:</strong> Ready to implement<br>
<strong>Estimated Time:</strong> 15-20 file updates</p>
</div></div>

      <div id="footer">
  Generated on Sun Dec 28 16:56:12 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-4.0.0).
</div>

    </div>
  </body>
</html>