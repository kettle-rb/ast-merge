<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Ast::Merge::Text::SectionSplitter
  
    &mdash; Documentation by YARD 0.9.38
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Ast::Merge::Text::SectionSplitter";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Ast.html" title="Ast (module)">Ast</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Merge.html" title="Ast::Merge (module)">Merge</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Text.html" title="Ast::Merge::Text (module)">Text</a></span></span>
     &raquo; 
    <span class="title">SectionSplitter</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Ast::Merge::Text::SectionSplitter
  <span class="abstract note title">Abstract</span>
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Ast::Merge::Text::SectionSplitter</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/ast/merge/text/section_splitter.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This class is abstract.</strong>
  <div class='inline'><p>Subclass and implement <span class='object_link'><a href="#split-instance_method" title="Ast::Merge::Text::SectionSplitter#split (method)">#split</a></span> and <span class='object_link'><a href="#join-instance_method" title="Ast::Merge::Text::SectionSplitter#join (method)">#join</a></span></p>
</div>
</div>
<p>Abstract base class for text-based section splitters.</p>

<p>A SectionSplitter takes text content (typically from a leaf node in an AST)<br />
and divides it into logical sections that can be matched, compared, and<br />
merged independently. This is useful for:</p>

<ul>
  <li>Markdown documents split by headings</li>
  <li>Plain text files with comment-delimited sections</li>
  <li>Configuration files with section markers</li>
  <li>Any text where structure is defined by patterns, not AST</li>
</ul>

<p><strong>Important</strong>: This is for TEXT-BASED splitting of content that doesnâ€™t<br />
have a structured AST. For AST-level node classification (like identifying<br />
<code>appraise</code> blocks in Ruby), use <code>Ast::Merge::SectionTyping</code> instead.</p>

<h2 id="how-section-splitting-works">How Section Splitting Works</h2>

<ol>
  <li><strong>Split</strong>: Parse text content into sections with unique names</li>
  <li><strong>Match</strong>: Compare sections between template and destination by name</li>
  <li><strong>Merge</strong>: Apply merge rules per-section (template wins, dest wins, merge)</li>
  <li><strong>Join</strong>: Reconstruct the text from merged sections</li>
</ol>

<h2 id="implementing-a-sectionsplitter">Implementing a SectionSplitter</h2>

<p>Subclasses must implement:</p>
<ul>
  <li><code>split(content)</code> - Parse content into an array of Section objects</li>
  <li><code>join(sections)</code> - Reconstruct content from sections</li>
</ul>

<p>Subclasses may override:</p>
<ul>
  <li><code>section_signature(section)</code> - Custom matching logic beyond name</li>
  <li><code>merge_sections(template_section, dest_section)</code> - Custom section merge</li>
  <li><code>normalize_name(name)</code> - Custom name normalization for matching</li>
</ul>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'><p>Implementing a Markdown heading splitter</p>
</div></h5>
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>HeadingSplitter</span> <span class='op'>&lt;</span> <span class='const'>SectionSplitter</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='label'>split_level:</span> <span class='int'>2</span><span class='rparen'>)</span>
    <span class='ivar'>@split_level</span> <span class='op'>=</span> <span class='id identifier rubyid_split_level'>split_level</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='rparen'>)</span>
    <span class='comment'># Parse and split on headings at @split_level
</span>  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_sections'>sections</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sections'>sections</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:full_text</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>Using a splitter for section-based merging</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_splitter'>splitter</span> <span class='op'>=</span> <span class='const'>HeadingSplitter</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>split_level:</span> <span class='int'>2</span><span class='rparen'>)</span>
<span class='id identifier rubyid_template_sections'>template_sections</span> <span class='op'>=</span> <span class='id identifier rubyid_splitter'>splitter</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='id identifier rubyid_template_content'>template_content</span><span class='rparen'>)</span>
<span class='id identifier rubyid_dest_sections'>dest_sections</span> <span class='op'>=</span> <span class='id identifier rubyid_splitter'>splitter</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='id identifier rubyid_dest_content'>dest_content</span><span class='rparen'>)</span>

<span class='id identifier rubyid_merged'>merged</span> <span class='op'>=</span> <span class='id identifier rubyid_splitter'>splitter</span><span class='period'>.</span><span class='id identifier rubyid_merge_documents'>merge_documents</span><span class='lparen'>(</span>
  <span class='id identifier rubyid_template_sections'>template_sections</span><span class='comma'>,</span>
  <span class='id identifier rubyid_dest_sections'>dest_sections</span><span class='comma'>,</span>
  <span class='label'>preference:</span> <span class='lbrace'>{</span>
    <span class='label'>default:</span> <span class='symbol'>:destination</span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Installation</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='symbol'>:template</span>
  <span class='rbrace'>}</span>
<span class='rparen'>)</span>

<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_splitter'>splitter</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_merged'>merged</span><span class='rparen'>)</span></code></pre>
    
  </div>


</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="LineSectionSplitter.html" title="Ast::Merge::Text::LineSectionSplitter (class)">LineSectionSplitter</a></span></p>
</div>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="DEFAULT_PREFERENCE-constant" class="">DEFAULT_PREFERENCE =
          <div class="docstring">
  <div class="discussion">
    <p>Default preference when none specified</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:destination</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-instance_method" title="#options (instance method)">#<strong>options</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Options passed to the splitter.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate!-class_method" title="validate! (class method)">.<strong>validate!</strong>(config)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Validate splitter configuration.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(**options)  &#x21d2; SectionSplitter </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Initialize the splitter with options.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#join-instance_method" title="#join (instance method)">#<strong>join</strong>(sections)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  <span class="abstract note title">abstract</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reconstruct text content from sections.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#merge-instance_method" title="#merge (instance method)">#<strong>merge</strong>(template_content, dest_content, preference: DEFAULT_PREFERENCE, add_template_only: false)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Merge two text documents using section-based semantics.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#merge_section_content-instance_method" title="#merge_section_content (instance method)">#<strong>merge_section_content</strong>(template_section, dest_section)  &#x21d2; Section </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Merge content within a section (for :merge preference).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#merge_section_lists-instance_method" title="#merge_section_lists (instance method)">#<strong>merge_section_lists</strong>(template_sections, dest_sections, preference: DEFAULT_PREFERENCE, add_template_only: false)  &#x21d2; Array&lt;Section&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Merge two lists of sections.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#merge_sections-instance_method" title="#merge_sections (instance method)">#<strong>merge_sections</strong>(template_section, dest_section, preference)  &#x21d2; Section </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Merge a single pair of matching sections.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalize_name-instance_method" title="#normalize_name (instance method)">#<strong>normalize_name</strong>(name)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Normalize a section name for matching.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#preference_for_section-instance_method" title="#preference_for_section (instance method)">#<strong>preference_for_section</strong>(section_name, preference)  &#x21d2; Symbol </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the preference for a specific section.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#section_signature-instance_method" title="#section_signature (instance method)">#<strong>section_signature</strong>(section)  &#x21d2; Array, String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Generate a signature for section matching.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#split-instance_method" title="#split (instance method)">#<strong>split</strong>(content)  &#x21d2; Array&lt;Section&gt; </a>
    

    
  </span>
  
  
  
  
  <span class="abstract note title">abstract</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Split text content into sections.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(**options)  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::Text::SectionSplitter (class)">SectionSplitter</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Initialize the splitter with options.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Splitter-specific options</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/text/section_splitter.rb', line 82</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="options-instance_method">
  
    #<strong>options</strong>  &#x21d2; <tt>Hash</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns Options passed to the splitter.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Options passed to the splitter</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/text/section_splitter.rb', line 77</span>

<span class='kw'>def</span> <span class='id identifier rubyid_options'>options</span>
  <span class='ivar'>@options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="validate!-class_method">
  
    .<strong>validate!</strong>(config)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Validate splitter configuration.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>config</span>
      
      
        <span class='type'>(<tt>Hash</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Configuration to validate</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If configuration is invalid</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


273
274
275
276
277
278
279</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/text/section_splitter.rb', line 273</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_validate!'>validate!</span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>splitter config must be a Hash, got </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="join-instance_method">
  
    #<strong>join</strong>(sections)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This method is abstract.</strong>
  <div class='inline'><p>Subclasses must implement this method</p>
</div>
</div>
<p>Reconstruct text content from sections.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>sections</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Sections to join</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Reconstructed text content</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/text/section_splitter.rb', line 100</span>

<span class='kw'>def</span> <span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_sections'>sections</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>#join must be implemented</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="merge-instance_method">
  
    #<strong>merge</strong>(template_content, dest_content, preference: DEFAULT_PREFERENCE, add_template_only: false)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Merge two text documents using section-based semantics.</p>

<p>This is the main entry point for section-based merging. It:</p>
<ol>
  <li>Splits both documents into sections</li>
  <li>Matches sections by name</li>
  <li>Merges each section according to preferences</li>
  <li>Joins the result back into text</li>
</ol>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>template_content</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Template text content</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dest_content</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Destination text content</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>preference</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>DEFAULT_PREFERENCE</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Merge preference</p>
<ul>
  <li><code>:template</code> - Template wins for all sections</li>
  <li><code>:destination</code> - Destination wins for all sections</li>
  <li>Hash - Per-section preferences: <code>{ default: :dest, "Section Name" =&gt; :template }</code></li>
</ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>add_template_only</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Whether to add sections only in template</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Merged text content</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122
123
124
125
126
127
128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/text/section_splitter.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_template_content'>template_content</span><span class='comma'>,</span> <span class='id identifier rubyid_dest_content'>dest_content</span><span class='comma'>,</span> <span class='label'>preference:</span> <span class='const'><span class='object_link'><a href="#DEFAULT_PREFERENCE-constant" title="Ast::Merge::Text::SectionSplitter::DEFAULT_PREFERENCE (constant)">DEFAULT_PREFERENCE</a></span></span><span class='comma'>,</span> <span class='label'>add_template_only:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_template_sections'>template_sections</span> <span class='op'>=</span> <span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='id identifier rubyid_template_content'>template_content</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dest_sections'>dest_sections</span> <span class='op'>=</span> <span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='id identifier rubyid_dest_content'>dest_content</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_merged_sections'>merged_sections</span> <span class='op'>=</span> <span class='id identifier rubyid_merge_section_lists'>merge_section_lists</span><span class='lparen'>(</span>
    <span class='id identifier rubyid_template_sections'>template_sections</span><span class='comma'>,</span>
    <span class='id identifier rubyid_dest_sections'>dest_sections</span><span class='comma'>,</span>
    <span class='label'>preference:</span> <span class='id identifier rubyid_preference'>preference</span><span class='comma'>,</span>
    <span class='label'>add_template_only:</span> <span class='id identifier rubyid_add_template_only'>add_template_only</span><span class='comma'>,</span>
  <span class='rparen'>)</span>

  <span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_merged_sections'>merged_sections</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="merge_section_content-instance_method">
  
    #<strong>merge_section_content</strong>(template_section, dest_section)  &#x21d2; <tt><span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Merge content within a section (for :merge preference).</p>

<p>Default implementation prefers destination. Subclasses should override<br />
for format-specific content merging.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>template_section</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Section from template</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dest_section</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Section from destination</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Section with merged content</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


211
212
213
214
215
216
217
218
219
220
221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/text/section_splitter.rb', line 211</span>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_section_content'>merge_section_content</span><span class='lparen'>(</span><span class='id identifier rubyid_template_section'>template_section</span><span class='comma'>,</span> <span class='id identifier rubyid_dest_section'>dest_section</span><span class='rparen'>)</span>
  <span class='comment'># Default: use template header, dest body
</span>  <span class='const'><span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='label'>name:</span> <span class='id identifier rubyid_dest_section'>dest_section</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
    <span class='label'>header:</span> <span class='id identifier rubyid_template_section'>template_section</span><span class='period'>.</span><span class='id identifier rubyid_header'>header</span> <span class='op'>||</span> <span class='id identifier rubyid_dest_section'>dest_section</span><span class='period'>.</span><span class='id identifier rubyid_header'>header</span><span class='comma'>,</span>
    <span class='label'>body:</span> <span class='id identifier rubyid_dest_section'>dest_section</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='comma'>,</span>
    <span class='label'>start_line:</span> <span class='id identifier rubyid_dest_section'>dest_section</span><span class='period'>.</span><span class='id identifier rubyid_start_line'>start_line</span><span class='comma'>,</span>
    <span class='label'>end_line:</span> <span class='id identifier rubyid_dest_section'>dest_section</span><span class='period'>.</span><span class='id identifier rubyid_end_line'>end_line</span><span class='comma'>,</span>
    <span class='label'>metadata:</span> <span class='id identifier rubyid_dest_section'>dest_section</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span><span class='op'>&amp;.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_template_section'>template_section</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='comma'>,</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="merge_section_lists-instance_method">
  
    #<strong>merge_section_lists</strong>(template_sections, dest_sections, preference: DEFAULT_PREFERENCE, add_template_only: false)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Merge two lists of sections.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>template_sections</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Sections from template</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dest_sections</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Sections from destination</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>preference</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>DEFAULT_PREFERENCE</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Merge preference</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>add_template_only</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Whether to add template-only sections</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Merged sections</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/text/section_splitter.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_section_lists'>merge_section_lists</span><span class='lparen'>(</span><span class='id identifier rubyid_template_sections'>template_sections</span><span class='comma'>,</span> <span class='id identifier rubyid_dest_sections'>dest_sections</span><span class='comma'>,</span> <span class='label'>preference:</span> <span class='const'><span class='object_link'><a href="#DEFAULT_PREFERENCE-constant" title="Ast::Merge::Text::SectionSplitter::DEFAULT_PREFERENCE (constant)">DEFAULT_PREFERENCE</a></span></span><span class='comma'>,</span> <span class='label'>add_template_only:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='comment'># Build lookup by normalized name
</span>  <span class='id identifier rubyid_dest_by_name'>dest_by_name</span> <span class='op'>=</span> <span class='id identifier rubyid_dest_sections'>dest_sections</span><span class='period'>.</span><span class='id identifier rubyid_each_with_object'>each_with_object</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_section'>section</span><span class='comma'>,</span> <span class='id identifier rubyid_hash'>hash</span><span class='op'>|</span>
    <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_name'>normalize_name</span><span class='lparen'>(</span><span class='id identifier rubyid_section'>section</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_section'>section</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_merged'>merged</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_seen_names'>seen_names</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

  <span class='comment'># Process template sections in order
</span>  <span class='id identifier rubyid_template_sections'>template_sections</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_template_section'>template_section</span><span class='op'>|</span>
    <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_name'>normalize_name</span><span class='lparen'>(</span><span class='id identifier rubyid_template_section'>template_section</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_seen_names'>seen_names</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_key'>key</span>

    <span class='id identifier rubyid_dest_section'>dest_section</span> <span class='op'>=</span> <span class='id identifier rubyid_dest_by_name'>dest_by_name</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_dest_section'>dest_section</span>
      <span class='comment'># Section exists in both - merge according to preference
</span>      <span class='id identifier rubyid_section_pref'>section_pref</span> <span class='op'>=</span> <span class='id identifier rubyid_preference_for_section'>preference_for_section</span><span class='lparen'>(</span><span class='id identifier rubyid_template_section'>template_section</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_preference'>preference</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_merged'>merged</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_merge_sections'>merge_sections</span><span class='lparen'>(</span><span class='id identifier rubyid_template_section'>template_section</span><span class='comma'>,</span> <span class='id identifier rubyid_dest_section'>dest_section</span><span class='comma'>,</span> <span class='id identifier rubyid_section_pref'>section_pref</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_add_template_only'>add_template_only</span>
      <span class='comment'># Template-only section - add if configured
</span>      <span class='id identifier rubyid_merged'>merged</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_template_section'>template_section</span>
    <span class='kw'>end</span>
    <span class='comment'># Otherwise skip template-only sections
</span>  <span class='kw'>end</span>

  <span class='comment'># Append destination-only sections (preserve destination content)
</span>  <span class='id identifier rubyid_dest_sections'>dest_sections</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dest_section'>dest_section</span><span class='op'>|</span>
    <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_name'>normalize_name</span><span class='lparen'>(</span><span class='id identifier rubyid_dest_section'>dest_section</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_seen_names'>seen_names</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_merged'>merged</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_dest_section'>dest_section</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_merged'>merged</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="merge_sections-instance_method">
  
    #<strong>merge_sections</strong>(template_section, dest_section, preference)  &#x21d2; <tt><span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Merge a single pair of matching sections.</p>

<p>The default implementation simply chooses one section based on preference.<br />
Subclasses can override for more sophisticated merging (e.g., line-level<br />
merging within sections).</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>template_section</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Section from template</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dest_section</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Section from destination</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>preference</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>:template or :destination</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Merged section</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


189
190
191
192
193
194
195
196
197
198
199
200
201</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/text/section_splitter.rb', line 189</span>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_sections'>merge_sections</span><span class='lparen'>(</span><span class='id identifier rubyid_template_section'>template_section</span><span class='comma'>,</span> <span class='id identifier rubyid_dest_section'>dest_section</span><span class='comma'>,</span> <span class='id identifier rubyid_preference'>preference</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_preference'>preference</span>
  <span class='kw'>when</span> <span class='symbol'>:template</span>
    <span class='id identifier rubyid_template_section'>template_section</span>
  <span class='kw'>when</span> <span class='symbol'>:destination</span>
    <span class='id identifier rubyid_dest_section'>dest_section</span>
  <span class='kw'>when</span> <span class='symbol'>:merge</span>
    <span class='comment'># Subclasses can implement actual content merging
</span>    <span class='id identifier rubyid_merge_section_content'>merge_section_content</span><span class='lparen'>(</span><span class='id identifier rubyid_template_section'>template_section</span><span class='comma'>,</span> <span class='id identifier rubyid_dest_section'>dest_section</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_dest_section'>dest_section</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="normalize_name-instance_method">
  
    #<strong>normalize_name</strong>(name)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Normalize a section name for matching.</p>

<p>Default implementation strips whitespace, downcases, normalizes spaces.<br />
Subclasses can override for format-specific normalization.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The section name</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Normalized name</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


251
252
253
254
255</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/text/section_splitter.rb', line 251</span>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize_name'>normalize_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="preference_for_section-instance_method">
  
    #<strong>preference_for_section</strong>(section_name, preference)  &#x21d2; <tt>Symbol</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the preference for a specific section.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>section_name</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The section name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>preference</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overall preference configuration</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>:template or :destination</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


228
229
230
231
232
233
234
235
236
237
238
239
240
241
242</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/text/section_splitter.rb', line 228</span>

<span class='kw'>def</span> <span class='id identifier rubyid_preference_for_section'>preference_for_section</span><span class='lparen'>(</span><span class='id identifier rubyid_section_name'>section_name</span><span class='comma'>,</span> <span class='id identifier rubyid_preference'>preference</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_preference'>preference</span> <span class='kw'>unless</span> <span class='id identifier rubyid_preference'>preference</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>

  <span class='comment'># Try exact match first
</span>  <span class='kw'>return</span> <span class='id identifier rubyid_preference'>preference</span><span class='lbracket'>[</span><span class='id identifier rubyid_section_name'>section_name</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_preference'>preference</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_section_name'>section_name</span><span class='rparen'>)</span>

  <span class='comment'># Try normalized name
</span>  <span class='id identifier rubyid_normalized'>normalized</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_name'>normalize_name</span><span class='lparen'>(</span><span class='id identifier rubyid_section_name'>section_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_preference'>preference</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_value'>value</span> <span class='kw'>if</span> <span class='id identifier rubyid_normalize_name'>normalize_name</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='id identifier rubyid_normalized'>normalized</span>
  <span class='kw'>end</span>

  <span class='comment'># Fall back to default
</span>  <span class='id identifier rubyid_preference'>preference</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:default</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#DEFAULT_PREFERENCE-constant" title="Ast::Merge::Text::SectionSplitter::DEFAULT_PREFERENCE (constant)">DEFAULT_PREFERENCE</a></span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="section_signature-instance_method">
  
    #<strong>section_signature</strong>(section)  &#x21d2; <tt>Array</tt>, <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Generate a signature for section matching.</p>

<p>Default uses normalized name. Subclasses can override for more<br />
sophisticated matching (e.g., including metadata).</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>section</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The section</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Signature for matching</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


264
265
266</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/text/section_splitter.rb', line 264</span>

<span class='kw'>def</span> <span class='id identifier rubyid_section_signature'>section_signature</span><span class='lparen'>(</span><span class='id identifier rubyid_section'>section</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_normalize_name'>normalize_name</span><span class='lparen'>(</span><span class='id identifier rubyid_section'>section</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="split-instance_method">
  
    #<strong>split</strong>(content)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This method is abstract.</strong>
  <div class='inline'><p>Subclasses must implement this method</p>
</div>
</div>
<p>Split text content into sections.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>content</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The text content to split</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Section.html" title="Ast::Merge::Text::Section (class)">Section</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Array of sections in document order</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/text/section_splitter.rb', line 91</span>

<span class='kw'>def</span> <span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>#split must be implemented</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Dec 12 05:03:34 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-3.4.7).
</div>

    </div>
  </body>
</html>