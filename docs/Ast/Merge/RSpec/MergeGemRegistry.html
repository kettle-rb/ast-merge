<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Ast::Merge::RSpec::MergeGemRegistry
  
    &mdash; Documentation by YARD 0.9.38
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Ast::Merge::RSpec::MergeGemRegistry";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (M)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Ast.html" title="Ast (module)">Ast</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Merge.html" title="Ast::Merge (module)">Merge</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../RSpec.html" title="Ast::Merge::RSpec (module)">RSpec</a></span></span>
     &raquo; 
    <span class="title">MergeGemRegistry</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Ast::Merge::RSpec::MergeGemRegistry
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/ast/merge/rspec/merge_gem_registry.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Registry for merge gem dependency tag availability checkers</p>

<p>This module allows merge gems (like markly-merge, prism-merge, json-merge)<br />
to register their availability checker for RSpec dependency tags without<br />
ast-merge needing to know about them directly.</p>

<p>== Purpose</p>

<p>When running RSpec tests with dependency tags (e.g., <code>:markly_merge</code>),<br />
ast-merge needs to know if each merge gem is available. The MergeGemRegistry<br />
provides a way for gems to register their availability checkers, and also<br />
pre-configures known merge gems so they can be checked before being loaded.</p>

<p>== Pre-configured Gems</p>

<p>The following merge gems are pre-configured so that their availability can<br />
be checked before they are loaded (e.g., during RSpec setup):</p>
<ul>
  <li>:markly_merge, :commonmarker_merge, :markdown_merge (markdown)</li>
  <li>:prism_merge, :bash_merge, :rbs_merge (code)</li>
  <li>:json_merge, :jsonc_merge (data)</li>
  <li>:toml_merge, :psych_merge, :dotenv_merge (config)</li>
</ul>

<p>External merge gems can also register themselves by calling <span class='object_link'><a href="#register-class_method" title="Ast::Merge::RSpec::MergeGemRegistry.register (method)">MergeGemRegistry.register</a></span><br />
when loaded.</p>

<p>== Registration</p>

<p>Each merge gem registers itself when loaded using <span class='object_link'><a href="#register-class_method" title="Ast::Merge::RSpec::MergeGemRegistry.register (method)">MergeGemRegistry.register</a></span>:</p>
<ul>
  <li>Tag name (e.g., :markly_merge)</li>
  <li>Require path (e.g., “markly/merge”)</li>
  <li>Merger class name (e.g., “Markly::Merge::SmartMerger”)</li>
  <li>Test source code to verify the merger works</li>
  <li>Optional category for grouping (e.g., :markdown, :data, :code)</li>
</ul>

<p>When a tag is registered, an availability method is automatically defined<br />
on <code>Ast::Merge::RSpec::DependencyTags</code>.</p>

<p>== Thread Safety</p>

<p>All operations are thread-safe using a Mutex for synchronization.<br />
Results are cached after first check for performance.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'><p>Registering a merge gem (in your gem’s lib file)</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># In markly-merge/lib/markly/merge.rb
</span><span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../../Ast.html" title="Ast (module)">Ast</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Merge.html" title="Ast::Merge (module)">Merge</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../RSpec.html" title="Ast::Merge::RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'>MergeGemRegistry</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../../../Ast.html" title="Ast (module)">Ast</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Merge.html" title="Ast::Merge (module)">Merge</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../RSpec.html" title="Ast::Merge::RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'>MergeGemRegistry</span><span class='period'>.</span><span class='id identifier rubyid_register'><span class='object_link'><a href="#register-class_method" title="Ast::Merge::RSpec::MergeGemRegistry.register (method)">register</a></span></span><span class='lparen'>(</span>
    <span class='symbol'>:markly_merge</span><span class='comma'>,</span>
    <span class='label'>require_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>markly/merge</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>merger_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Markly::Merge::SmartMerger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>test_source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'># Test\n\nParagraph</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>category:</span> <span class='symbol'>:markdown</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>Checking availability</p>
</div></h5>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../../../Ast.html" title="Ast (module)">Ast</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Merge.html" title="Ast::Merge (module)">Merge</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../RSpec.html" title="Ast::Merge::RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'>MergeGemRegistry</span><span class='period'>.</span><span class='id identifier rubyid_available?'><span class='object_link'><a href="#available%3F-class_method" title="Ast::Merge::RSpec::MergeGemRegistry.available? (method)">available?</a></span></span><span class='lparen'>(</span><span class='symbol'>:markly_merge</span><span class='rparen'>)</span>  <span class='comment'># =&gt; true/false</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>Getting all registered gems</p>
</div></h5>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../../../Ast.html" title="Ast (module)">Ast</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Merge.html" title="Ast::Merge (module)">Merge</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../RSpec.html" title="Ast::Merge::RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'>MergeGemRegistry</span><span class='period'>.</span><span class='id identifier rubyid_registered_gems'><span class='object_link'><a href="#registered_gems-class_method" title="Ast::Merge::RSpec::MergeGemRegistry.registered_gems (method)">registered_gems</a></span></span> <span class='comment'># =&gt; [:markly_merge, :prism_merge, ...]</span></code></pre>
    
  </div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="DependencyTags.html" title="Ast::Merge::RSpec::DependencyTags (module)">Uses MergeGemRegistry for dynamic gem detection</a></span></li>
    
  </ul>

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="CATEGORIES-constant" class="">CATEGORIES =
          <div class="docstring">
  <div class="discussion">
    <p>Valid categories for merge gems</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='qsymbols_beg'>%i[</span><span class='tstring_content'>markdown</span><span class='words_sep'> </span><span class='tstring_content'>data</span><span class='words_sep'> </span><span class='tstring_content'>code</span><span class='words_sep'> </span><span class='tstring_content'>config</span><span class='words_sep'> </span><span class='tstring_content'>other</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="KNOWN_GEMS-constant" class="">KNOWN_GEMS =
          <div class="docstring">
  <div class="discussion">
    <p>Pre-configured known merge gems<br />
These can be checked before the gems are actually loaded</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='comment'># Markdown gems
</span>  <span class='label'>markly_merge:</span> <span class='lbrace'>{</span>
    <span class='label'>require_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>markly/merge</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>merger_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Markly::Merge::SmartMerger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>test_source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'># Test\n\nParagraph</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>category:</span> <span class='symbol'>:markdown</span><span class='comma'>,</span>
    <span class='label'>skip_instantiation:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>commonmarker_merge:</span> <span class='lbrace'>{</span>
    <span class='label'>require_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>commonmarker/merge</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>merger_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Commonmarker::Merge::SmartMerger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>test_source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'># Test\n\nParagraph</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>category:</span> <span class='symbol'>:markdown</span><span class='comma'>,</span>
    <span class='label'>skip_instantiation:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>markdown_merge:</span> <span class='lbrace'>{</span>
    <span class='label'>require_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>markdown/merge</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>merger_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Markdown::Merge::SmartMerger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>test_source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'># Test\n\nParagraph</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>category:</span> <span class='symbol'>:markdown</span><span class='comma'>,</span>
    <span class='label'>skip_instantiation:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='comment'># Requires backend
</span>  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='comment'># Code gems
</span>  <span class='label'>prism_merge:</span> <span class='lbrace'>{</span>
    <span class='label'>require_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>prism/merge</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>merger_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Prism::Merge::SmartMerger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>test_source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>def foo; end</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>category:</span> <span class='symbol'>:code</span><span class='comma'>,</span>
    <span class='label'>skip_instantiation:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>bash_merge:</span> <span class='lbrace'>{</span>
    <span class='label'>require_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bash/merge</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>merger_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bash::Merge::SmartMerger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>test_source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!/bin/bash\necho hello</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>category:</span> <span class='symbol'>:code</span><span class='comma'>,</span>
    <span class='label'>skip_instantiation:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>rbs_merge:</span> <span class='lbrace'>{</span>
    <span class='label'>require_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rbs/merge</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>merger_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Rbs::Merge::SmartMerger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>test_source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>class Foo\nend</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>category:</span> <span class='symbol'>:code</span><span class='comma'>,</span>
    <span class='label'>skip_instantiation:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='comment'># Data gems
</span>  <span class='label'>json_merge:</span> <span class='lbrace'>{</span>
    <span class='label'>require_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>json/merge</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>merger_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Json::Merge::SmartMerger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>test_source:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{&quot;key&quot;: &quot;value&quot;}</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>category:</span> <span class='symbol'>:data</span><span class='comma'>,</span>
    <span class='label'>skip_instantiation:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>jsonc_merge:</span> <span class='lbrace'>{</span>
    <span class='label'>require_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jsonc/merge</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>merger_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Jsonc::Merge::SmartMerger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>test_source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>// comment\n{\&quot;key\&quot;: \&quot;value\&quot;}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>category:</span> <span class='symbol'>:data</span><span class='comma'>,</span>
    <span class='label'>skip_instantiation:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='comment'># Config gems
</span>  <span class='label'>toml_merge:</span> <span class='lbrace'>{</span>
    <span class='label'>require_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>toml/merge</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>merger_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Toml::Merge::SmartMerger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>test_source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[section]\nkey = \&quot;value\&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>category:</span> <span class='symbol'>:config</span><span class='comma'>,</span>
    <span class='label'>skip_instantiation:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>psych_merge:</span> <span class='lbrace'>{</span>
    <span class='label'>require_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>psych/merge</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>merger_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Psych::Merge::SmartMerger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>test_source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>key: value</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>category:</span> <span class='symbol'>:config</span><span class='comma'>,</span>
    <span class='label'>skip_instantiation:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>dotenv_merge:</span> <span class='lbrace'>{</span>
    <span class='label'>require_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dotenv/merge</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>merger_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Dotenv::Merge::SmartMerger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>test_source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>KEY=value</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>category:</span> <span class='symbol'>:config</span><span class='comma'>,</span>
    <span class='label'>skip_instantiation:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#available%3F-class_method" title="available? (class method)">.<strong>available?</strong>(tag_name)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check if a merge gem is available and functional.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear!-class_method" title="clear! (class method)">.<strong>clear!</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Clear all registrations and cache.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_cache!-class_method" title="clear_cache! (class method)">.<strong>clear_cache!</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Clear the availability cache.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#force_check_availability!-class_method" title="force_check_availability! (class method)">.<strong>force_check_availability!</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Force availability checking for all registered gems.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gems_by_category-class_method" title="gems_by_category (class method)">.<strong>gems_by_category</strong>(category)  &#x21d2; Array&lt;Symbol&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get gems filtered by category.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#info-class_method" title="info (class method)">.<strong>info</strong>(tag_name)  &#x21d2; Hash<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get registration info for a gem.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register-class_method" title="register (class method)">.<strong>register</strong>(tag_name, require_path:, merger_class:, test_source:, category: :other, skip_instantiation: false)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Register a merge gem for dependency tag support.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register_known_gems-class_method" title="register_known_gems (class method)">.<strong>register_known_gems</strong>(*gem_names)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Register one or more known gems for RSpec dependency tag support.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#registered%3F-class_method" title="registered? (class method)">.<strong>registered?</strong>(tag_name)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check if a tag is registered.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#registered_gems-class_method" title="registered_gems (class method)">.<strong>registered_gems</strong>  &#x21d2; Array&lt;Symbol&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get all explicitly registered gem tag names.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_availability!-class_method" title="reset_availability! (class method)">.<strong>reset_availability!</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reset memoized availability on DependencyTags.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#summary-class_method" title="summary (class method)">.<strong>summary</strong>  &#x21d2; Hash{Symbol =&gt; Boolean} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get a summary of all registered gems and their availability.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="available?-class_method">
  
    .<strong>available?</strong>(tag_name)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check if a merge gem is available and functional</p>

<p>This method will try to load the gem if it’s not yet registered but<br />
is known (in KNOWN_GEMS). This allows availability checking before<br />
the gem is explicitly loaded.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>tag_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the tag name to check</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>true if the merge gem is available and works</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/rspec/merge_gem_registry.rb', line 216</span>

<span class='kw'>def</span> <span class='id identifier rubyid_available?'>available?</span><span class='lparen'>(</span><span class='id identifier rubyid_tag_name'>tag_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_tag_sym'>tag_sym</span> <span class='op'>=</span> <span class='id identifier rubyid_tag_name'>tag_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>

  <span class='comment'># Check cache first
</span>  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>return</span> <span class='ivar'>@availability_cache</span><span class='lbracket'>[</span><span class='id identifier rubyid_tag_sym'>tag_sym</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='ivar'>@availability_cache</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_tag_sym'>tag_sym</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Get registration info (from registry or known gems)
</span>  <span class='id identifier rubyid_info'>info</span> <span class='op'>=</span> <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='lbrace'>{</span> <span class='ivar'>@registry</span><span class='lbracket'>[</span><span class='id identifier rubyid_tag_sym'>tag_sym</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_info'>info</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="#KNOWN_GEMS-constant" title="Ast::Merge::RSpec::MergeGemRegistry::KNOWN_GEMS (constant)">KNOWN_GEMS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_tag_sym'>tag_sym</span><span class='rbracket'>]</span>

  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_info'>info</span>

  <span class='comment'># Check if gem works
</span>  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_gem_works?'>gem_works?</span><span class='lparen'>(</span>
    <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:require_path</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:merger_class</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:test_source</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:skip_instantiation</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='rparen'>)</span>

  <span class='comment'># Cache result
</span>  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@availability_cache</span><span class='lbracket'>[</span><span class='id identifier rubyid_tag_sym'>tag_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear!-class_method">
  
    .<strong>clear!</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Clear all registrations and cache</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


382
383
384
385
386
387
388</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/rspec/merge_gem_registry.rb', line 382</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clear!'>clear!</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@registry</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
    <span class='ivar'>@availability_cache</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear_cache!-class_method">
  
    .<strong>clear_cache!</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Clear the availability cache</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


372
373
374
375
376
377</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/rspec/merge_gem_registry.rb', line 372</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_cache!'>clear_cache!</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@availability_cache</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="force_check_availability!-class_method">
  
    .<strong>force_check_availability!</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Force availability checking for all registered gems</p>

<p>This method should be called AFTER SimpleCov is loaded (typically at the end<br />
of spec_helper.rb) to trigger gem loading and availability checking. Calling<br />
this ensures RSpec exclusion filters are properly configured based on which<br />
gems are actually available.</p>

<p>This is necessary because register_known_gems() only registers gems without<br />
checking availability. The actual availability check (which requires loading<br />
the gem) must happen AFTER coverage instrumentation is set up.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'><p>At the end of spec_helper.rb (after SimpleCov loads)</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Force availability checking now that coverage is instrumented
</span><span class='const'><span class='object_link'><a href="../../../Ast.html" title="Ast (module)">Ast</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Merge.html" title="Ast::Merge (module)">Merge</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../RSpec.html" title="Ast::Merge::RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Ast::Merge::RSpec::MergeGemRegistry (module)">MergeGemRegistry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_force_check_availability!'>force_check_availability!</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


340
341
342
343
344
345
346
347</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/rspec/merge_gem_registry.rb', line 340</span>

<span class='kw'>def</span> <span class='id identifier rubyid_force_check_availability!'>force_check_availability!</span>
  <span class='id identifier rubyid_registered_gems'>registered_gems</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tag'>tag</span><span class='op'>|</span>
    <span class='comment'># This will trigger gem_works? which loads the gem
</span>    <span class='comment'># Results are cached, so subsequent calls are fast
</span>    <span class='id identifier rubyid_available?'>available?</span><span class='lparen'>(</span><span class='id identifier rubyid_tag'>tag</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="gems_by_category-class_method">
  
    .<strong>gems_by_category</strong>(category)  &#x21d2; <tt>Array&lt;Symbol&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get gems filtered by category</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>category</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>one of :markdown, :data, :code, :config, :other</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>list of tag names in that category</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


316
317
318
319
320
321
322</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/rspec/merge_gem_registry.rb', line 316</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gems_by_category'>gems_by_category</span><span class='lparen'>(</span><span class='id identifier rubyid_category'>category</span><span class='rparen'>)</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_known'>known</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#KNOWN_GEMS-constant" title="Ast::Merge::RSpec::MergeGemRegistry::KNOWN_GEMS (constant)">KNOWN_GEMS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:category</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_category'>category</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
    <span class='id identifier rubyid_registered'>registered</span> <span class='op'>=</span> <span class='ivar'>@registry</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:category</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_category'>category</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_known'>known</span> <span class='op'>+</span> <span class='id identifier rubyid_registered'>registered</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="info-class_method">
  
    .<strong>info</strong>(tag_name)  &#x21d2; <tt>Hash</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get registration info for a gem</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>tag_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the tag name</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>registration info or nil if not registered/known</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


353
354
355
356
357
358</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/rspec/merge_gem_registry.rb', line 353</span>

<span class='kw'>def</span> <span class='id identifier rubyid_info'>info</span><span class='lparen'>(</span><span class='id identifier rubyid_tag_name'>tag_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_tag_sym'>tag_sym</span> <span class='op'>=</span> <span class='id identifier rubyid_tag_name'>tag_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@registry</span><span class='lbracket'>[</span><span class='id identifier rubyid_tag_sym'>tag_sym</span><span class='rbracket'>]</span><span class='op'>&amp;.</span><span class='id identifier rubyid_dup'>dup</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="#KNOWN_GEMS-constant" title="Ast::Merge::RSpec::MergeGemRegistry::KNOWN_GEMS (constant)">KNOWN_GEMS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_tag_sym'>tag_sym</span><span class='rbracket'>]</span><span class='op'>&amp;.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="register-class_method">
  
    .<strong>register</strong>(tag_name, require_path:, merger_class:, test_source:, category: :other, skip_instantiation: false)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Register a merge gem for dependency tag support</p>

<p>When a gem is registered, this also dynamically defines a <code>*_available?</code> method<br />
on <code>Ast::Merge::RSpec::DependencyTags</code> if it doesn’t already exist.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'><p>Register a merge gem</p>
</div></h5>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../../../Ast.html" title="Ast (module)">Ast</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Merge.html" title="Ast::Merge (module)">Merge</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../RSpec.html" title="Ast::Merge::RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Ast::Merge::RSpec::MergeGemRegistry (module)">MergeGemRegistry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_register'>register</span><span class='lparen'>(</span>
  <span class='symbol'>:markly_merge</span><span class='comma'>,</span>
  <span class='label'>require_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>markly/merge</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>merger_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Markly::Merge::SmartMerger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>test_source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'># Test\n\nParagraph</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>category:</span> <span class='symbol'>:markdown</span>
<span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>tag_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the RSpec tag name (e.g., :markly_merge)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>require_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the require path for the gem (e.g., “markly/merge”)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>merger_class</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the full class name of the SmartMerger</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>test_source</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>sample source code to test merging</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>category</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:other</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>category for grouping (:markdown, :data, :code, :config, :other)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>skip_instantiation</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>if true, only check class exists (for gems requiring backends)</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/rspec/merge_gem_registry.rb', line 185</span>

<span class='kw'>def</span> <span class='id identifier rubyid_register'>register</span><span class='lparen'>(</span><span class='id identifier rubyid_tag_name'>tag_name</span><span class='comma'>,</span> <span class='label'>require_path:</span><span class='comma'>,</span> <span class='label'>merger_class:</span><span class='comma'>,</span> <span class='label'>test_source:</span><span class='comma'>,</span> <span class='label'>category:</span> <span class='symbol'>:other</span><span class='comma'>,</span> <span class='label'>skip_instantiation:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid category: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_category'>category</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="#CATEGORIES-constant" title="Ast::Merge::RSpec::MergeGemRegistry::CATEGORIES (constant)">CATEGORIES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_category'>category</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_tag_sym'>tag_sym</span> <span class='op'>=</span> <span class='id identifier rubyid_tag_name'>tag_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>

  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@registry</span><span class='lbracket'>[</span><span class='id identifier rubyid_tag_sym'>tag_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>require_path:</span> <span class='id identifier rubyid_require_path'>require_path</span><span class='comma'>,</span>
      <span class='label'>merger_class:</span> <span class='id identifier rubyid_merger_class'>merger_class</span><span class='comma'>,</span>
      <span class='label'>test_source:</span> <span class='id identifier rubyid_test_source'>test_source</span><span class='comma'>,</span>
      <span class='label'>category:</span> <span class='id identifier rubyid_category'>category</span><span class='comma'>,</span>
      <span class='label'>skip_instantiation:</span> <span class='id identifier rubyid_skip_instantiation'>skip_instantiation</span><span class='comma'>,</span>
    <span class='rbrace'>}</span>
    <span class='comment'># Clear cache when re-registering
</span>    <span class='ivar'>@availability_cache</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_tag_sym'>tag_sym</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Define availability method on DependencyTags
</span>  <span class='id identifier rubyid_define_availability_method'>define_availability_method</span><span class='lparen'>(</span><span class='id identifier rubyid_tag_sym'>tag_sym</span><span class='rparen'>)</span>

  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="register_known_gems-class_method">
  
    .<strong>register_known_gems</strong>(*gem_names)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Register one or more known gems for RSpec dependency tag support</p>

<p>This allows test suites to explicitly register only the merge gems they need<br />
for their tests, avoiding the overhead of registering all known gems.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'><p>In spec/config/tree_haver.rb</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Only register the markdown merge gems that markly-merge tests depend on
</span><span class='const'><span class='object_link'><a href="../../../Ast.html" title="Ast (module)">Ast</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Merge.html" title="Ast::Merge (module)">Merge</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../RSpec.html" title="Ast::Merge::RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Ast::Merge::RSpec::MergeGemRegistry (module)">MergeGemRegistry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_register_known_gems'>register_known_gems</span><span class='lparen'>(</span><span class='symbol'>:prism_merge</span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>Register multiple gems</p>
</div></h5>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../../../Ast.html" title="Ast (module)">Ast</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Merge.html" title="Ast::Merge (module)">Merge</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../RSpec.html" title="Ast::Merge::RSpec (module)">RSpec</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Ast::Merge::RSpec::MergeGemRegistry (module)">MergeGemRegistry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_register_known_gems'>register_known_gems</span><span class='lparen'>(</span>
  <span class='symbol'>:commonmarker_merge</span><span class='comma'>,</span>
  <span class='symbol'>:markly_merge</span>
<span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>gem_names</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>list of gem names from KNOWN_GEMS to register</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/rspec/merge_gem_registry.rb', line 273</span>

<span class='kw'>def</span> <span class='id identifier rubyid_register_known_gems'>register_known_gems</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_gem_names'>gem_names</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_gem_names'>gem_names</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tag_name'>tag_name</span><span class='op'>|</span>
    <span class='id identifier rubyid_tag_sym'>tag_sym</span> <span class='op'>=</span> <span class='id identifier rubyid_tag_name'>tag_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>

    <span class='comment'># Skip if not in KNOWN_GEMS
</span>    <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="#KNOWN_GEMS-constant" title="Ast::Merge::RSpec::MergeGemRegistry::KNOWN_GEMS (constant)">KNOWN_GEMS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_tag_sym'>tag_sym</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_warn'>warn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unknown gem: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tag_name'>tag_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Available: </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#KNOWN_GEMS-constant" title="Ast::Merge::RSpec::MergeGemRegistry::KNOWN_GEMS (constant)">KNOWN_GEMS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>next</span>
    <span class='kw'>end</span>

    <span class='comment'># Skip if already registered
</span>    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_registered?'>registered?</span><span class='lparen'>(</span><span class='id identifier rubyid_tag_sym'>tag_sym</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_metadata'>metadata</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#KNOWN_GEMS-constant" title="Ast::Merge::RSpec::MergeGemRegistry::KNOWN_GEMS (constant)">KNOWN_GEMS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_tag_sym'>tag_sym</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_register'>register</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_tag_sym'>tag_sym</span><span class='comma'>,</span>
      <span class='label'>require_path:</span> <span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='symbol'>:require_path</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='label'>merger_class:</span> <span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='symbol'>:merger_class</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='label'>test_source:</span> <span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='symbol'>:test_source</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='label'>category:</span> <span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='symbol'>:category</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='label'>skip_instantiation:</span> <span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='symbol'>:skip_instantiation</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="registered?-class_method">
  
    .<strong>registered?</strong>(tag_name)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check if a tag is registered</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>tag_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the tag name</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>true if the tag is registered</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


250
251
252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/rspec/merge_gem_registry.rb', line 250</span>

<span class='kw'>def</span> <span class='id identifier rubyid_registered?'>registered?</span><span class='lparen'>(</span><span class='id identifier rubyid_tag_name'>tag_name</span><span class='rparen'>)</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@registry</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_tag_name'>tag_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="registered_gems-class_method">
  
    .<strong>registered_gems</strong>  &#x21d2; <tt>Array&lt;Symbol&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get all explicitly registered gem tag names</p>

<p>This returns ONLY gems that were explicitly registered via register() or<br />
register_known_gems(), NOT all gems in KNOWN_GEMS. This prevents premature<br />
loading of gems during RSpec tag setup, which would happen before SimpleCov<br />
and ruin coverage reporting.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>list of registered tag names</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


306
307
308
309
310</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/rspec/merge_gem_registry.rb', line 306</span>

<span class='kw'>def</span> <span class='id identifier rubyid_registered_gems'>registered_gems</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@registry</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset_availability!-class_method">
  
    .<strong>reset_availability!</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Reset memoized availability on DependencyTags</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


393
394
395
396
397
398
399
400
401</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/rspec/merge_gem_registry.rb', line 393</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_availability!'>reset_availability!</span>
  <span class='id identifier rubyid_clear_cache!'>clear_cache!</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="DependencyTags.html" title="Ast::Merge::RSpec::DependencyTags (module)">DependencyTags</a></span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_registered_gems'>registered_gems</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tag'>tag</span><span class='op'>|</span>
    <span class='id identifier rubyid_ivar'>ivar</span> <span class='op'>=</span> <span class='symbol'>:&quot;@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tag'>tag</span><span class='embexpr_end'>}</span><span class='tstring_content'>_available</span><span class='tstring_end'>&quot;</span></span>
    <span class='const'><span class='object_link'><a href="DependencyTags.html" title="Ast::Merge::RSpec::DependencyTags (module)">DependencyTags</a></span></span><span class='period'>.</span><span class='id identifier rubyid_remove_instance_variable'>remove_instance_variable</span><span class='lparen'>(</span><span class='id identifier rubyid_ivar'>ivar</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="DependencyTags.html" title="Ast::Merge::RSpec::DependencyTags (module)">DependencyTags</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_defined?'>instance_variable_defined?</span><span class='lparen'>(</span><span class='id identifier rubyid_ivar'>ivar</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="summary-class_method">
  
    .<strong>summary</strong>  &#x21d2; <tt>Hash{Symbol =&gt; Boolean}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get a summary of all registered gems and their availability</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol =&gt; Boolean}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>map of tag name to availability</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


363
364
365
366
367</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/rspec/merge_gem_registry.rb', line 363</span>

<span class='kw'>def</span> <span class='id identifier rubyid_summary'>summary</span>
  <span class='id identifier rubyid_registered_gems'>registered_gems</span><span class='period'>.</span><span class='id identifier rubyid_each_with_object'>each_with_object</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tag'>tag</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span><span class='op'>|</span>
    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_tag'>tag</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_available?'>available?</span><span class='lparen'>(</span><span class='id identifier rubyid_tag'>tag</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Jan 20 04:33:00 2026 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-4.0.0).
</div>

    </div>
  </body>
</html>