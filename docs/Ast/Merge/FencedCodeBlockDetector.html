<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Ast::Merge::FencedCodeBlockDetector
  
    &mdash; Documentation by YARD 0.9.38
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Ast::Merge::FencedCodeBlockDetector";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (F)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Ast.html" title="Ast (module)">Ast</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Merge.html" title="Ast::Merge (module)">Merge</a></span></span>
     &raquo; 
    <span class="title">FencedCodeBlockDetector</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Ast::Merge::FencedCodeBlockDetector
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="RegionDetectorBase.html" title="Ast::Merge::RegionDetectorBase (class)">RegionDetectorBase</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="RegionDetectorBase.html" title="Ast::Merge::RegionDetectorBase (class)">RegionDetectorBase</a></span></li>
          
            <li class="next">Ast::Merge::FencedCodeBlockDetector</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/ast/merge/fenced_code_block_detector.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Detects fenced code blocks with a specific language identifier.</p>

<p>This detector finds Markdown-style fenced code blocks (using ``` or ~~~)<br />
that have a specific language identifier. It can be configured for any<br />
language: ruby, json, yaml, mermaid, etc.</p>

<h2 id="when-to-use-this-detector">When to Use This Detector</h2>

<p><strong>Use FencedCodeBlockDetector when:</strong></p>
<ul>
  <li>Working with raw Markdown text without parsing to AST</li>
  <li>Quick extraction from strings without parser dependencies</li>
  <li>Custom text processing requiring line-level precision</li>
  <li>Operating on source text directly (e.g., linters, formatters)</li>
</ul>

<p><strong>Do NOT use FencedCodeBlockDetector when:</strong></p>
<ul>
  <li>Working with parsed Markdown AST (use native code block nodes instead)</li>
  <li>Integrating with markdown-merge’s CodeBlockMerger (it uses native nodes)</li>
  <li>Using tree_haver’s unified Markdown backend API</li>
</ul>

<h2 id="comparison-fencedcodeblockdetector-vs-native-ast-nodes">Comparison: FencedCodeBlockDetector vs Native AST Nodes</h2>

<h3 id="native-ast-approach-preferred-for-ast-based-tools">Native AST Approach (Preferred for AST-based Tools)</h3>

<p>When working with parsed Markdown AST via tree_haver (commonmarker/markly backends):</p>

<pre class="code language-ruby"><code class="language-ruby"># markdown-merge&#39;s CodeBlockMerger uses this approach:
language = node.fence_info.split(/\s+/).first  # e.g., &quot;ruby&quot;
content = node.string_content                   # Raw code inside block

# Then delegate to language-specific parser:
case language
when &quot;ruby&quot;
  merger = Prism::Merge::SmartMerger.new(template, dest, preference: :destination)
  merged_content = merger.merge  # Prism parses Ruby code into full AST!
when &quot;yaml&quot;
  merger = Psych::Merge::SmartMerger.new(template, dest, preference: :destination)
  merged_content = merger.merge  # Psych parses YAML into AST!
when &quot;json&quot;
  merger = Json::Merge::SmartMerger.new(template, dest, preference: :destination)
  merged_content = merger.merge  # JSON parser creates AST!
when &quot;bash&quot;
  merger = Bash::Merge::SmartMerger.new(template, dest, preference: :destination)
  merged_content = merger.merge  # tree-sitter parses bash into AST!
end
</code></pre>

<p><strong>Advantages of Native AST approach:</strong></p>
<ul>
  <li>✓ Parser handles all edge cases (nested backticks, indentation, etc.)</li>
  <li>✓ Respects node boundaries from authoritative source</li>
  <li>✓ No regex brittleness</li>
  <li>✓ Automatic handling of ``` and ~~~ fence styles</li>
  <li>✓ Enables TRUE language-aware merging (not just text replacement)</li>
  <li>✓ Language-specific parsers create full ASTs of embedded code</li>
  <li>✓ Smart merging at semantic level (method definitions, YAML keys, JSON properties)</li>
</ul>

<h3 id="text-based-approach-this-class">Text-Based Approach (This Class)</h3>

<p>When working with raw text:</p>

<pre class="code language-ruby"><code class="language-ruby">detector = FencedCodeBlockDetector.ruby
regions = detector.detect_all(markdown_text)
regions.each do |region|
  puts &quot;Ruby code at lines #{region.start_line}-#{region.end_line}&quot;
  # region.content is just a string - NO parsing happens
end
</code></pre>

<p><strong>Limitations of text-based approach:</strong></p>
<ul>
  <li>• Uses regex to find blocks (may miss edge cases)</li>
  <li>• Returns strings, not parsed structures</li>
  <li>• Cannot perform semantic merging</li>
  <li>• Manual handling of fence variations</li>
  <li>• No language-specific intelligence</li>
</ul>

<h2 id="real-world-example-markdown-merge-inner-code-block-merging">Real-World Example: markdown-merge Inner Code Block Merging</h2>

<p>When <code>inner_merge_code_blocks: true</code> is enabled in markdown-merge:</p>

<ol>
  <li><strong>Markdown Parser</strong> (commonmarker/markly) parses markdown into AST
    <ul>
      <li>Creates code_block nodes with <code>fence_info</code> and <code>string_content</code></li>
    </ul>
  </li>
  <li><strong>CodeBlockMerger</strong> extracts code using native node properties:
    <pre class="code language-ruby"><code class="language-ruby">language = node.fence_info.split(/\s+/).first
template_code = template_node.string_content
dest_code = dest_node.string_content
</code></pre>
  </li>
  <li><strong>Language-Specific Parser</strong> creates FULL AST of the embedded code:
    <ul>
      <li><code>Prism::Merge</code> → Prism parses Ruby into complete AST (ClassNode, DefNode, etc.)</li>
      <li><code>Psych::Merge</code> → Psych parses YAML into document structure</li>
      <li><code>Json::Merge</code> → JSON parser creates object/array tree</li>
      <li><code>Bash::Merge</code> → tree-sitter creates bash statement AST</li>
    </ul>
  </li>
  <li><strong>Smart Merger</strong> performs SEMANTIC merging at AST level:
    <ul>
      <li>Ruby: Merges class definitions, preserves custom methods</li>
      <li>YAML: Merges keys, preserves custom configuration values</li>
      <li>JSON: Merges objects, destination values win on conflicts</li>
      <li>Bash: Merges statements, preserves custom exports</li>
    </ul>
  </li>
  <li><strong>Result</strong> is intelligently merged code, not simple text concatenation!</li>
</ol>

<p><strong>This means:</strong> The embedded code is FULLY PARSED by its native language parser,<br />
enabling true semantic-level merging. FencedCodeBlockDetector would only find<br />
the text boundaries - it cannot perform this semantic merging.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'><p>Detecting Ruby code blocks</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_detector'>detector</span> <span class='op'>=</span> <span class='const'>FencedCodeBlockDetector</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Ast::Merge::FencedCodeBlockDetector#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>aliases:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='id identifier rubyid_regions'>regions</span> <span class='op'>=</span> <span class='id identifier rubyid_detector'>detector</span><span class='period'>.</span><span class='id identifier rubyid_detect_all'>detect_all</span><span class='lparen'>(</span><span class='id identifier rubyid_markdown_source'>markdown_source</span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>Using factory methods</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_detector'>detector</span> <span class='op'>=</span> <span class='const'>FencedCodeBlockDetector</span><span class='period'>.</span><span class='id identifier rubyid_ruby'><span class='object_link'><a href="#ruby-class_method" title="Ast::Merge::FencedCodeBlockDetector.ruby (method)">ruby</a></span></span>
<span class='id identifier rubyid_detector'>detector</span> <span class='op'>=</span> <span class='const'>FencedCodeBlockDetector</span><span class='period'>.</span><span class='id identifier rubyid_yaml'><span class='object_link'><a href="#yaml-class_method" title="Ast::Merge::FencedCodeBlockDetector.yaml (method)">yaml</a></span></span>
<span class='id identifier rubyid_detector'>detector</span> <span class='op'>=</span> <span class='const'>FencedCodeBlockDetector</span><span class='period'>.</span><span class='id identifier rubyid_json'><span class='object_link'><a href="#json-class_method" title="Ast::Merge::FencedCodeBlockDetector.json (method)">json</a></span></span></code></pre>
    
  </div>


</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#aliases-instance_method" title="#aliases (instance method)">#<strong>aliases</strong>  &#x21d2; Array&lt;String&gt; </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Alternative language identifiers.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#language-instance_method" title="#language (instance method)">#<strong>language</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The primary language identifier.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bash-class_method" title="bash (class method)">.<strong>bash</strong>  &#x21d2; FencedCodeBlockDetector </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a detector for Bash/Shell code blocks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#css-class_method" title="css (class method)">.<strong>css</strong>  &#x21d2; FencedCodeBlockDetector </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a detector for CSS code blocks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#html-class_method" title="html (class method)">.<strong>html</strong>  &#x21d2; FencedCodeBlockDetector </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a detector for HTML code blocks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#javascript-class_method" title="javascript (class method)">.<strong>javascript</strong>  &#x21d2; FencedCodeBlockDetector </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a detector for JavaScript code blocks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#json-class_method" title="json (class method)">.<strong>json</strong>  &#x21d2; FencedCodeBlockDetector </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a detector for JSON code blocks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#markdown-class_method" title="markdown (class method)">.<strong>markdown</strong>  &#x21d2; FencedCodeBlockDetector </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a detector for Markdown code blocks (nested markdown).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mermaid-class_method" title="mermaid (class method)">.<strong>mermaid</strong>  &#x21d2; FencedCodeBlockDetector </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a detector for Mermaid diagram blocks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#python-class_method" title="python (class method)">.<strong>python</strong>  &#x21d2; FencedCodeBlockDetector </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a detector for Python code blocks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ruby-class_method" title="ruby (class method)">.<strong>ruby</strong>  &#x21d2; FencedCodeBlockDetector </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a detector for Ruby code blocks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sql-class_method" title="sql (class method)">.<strong>sql</strong>  &#x21d2; FencedCodeBlockDetector </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a detector for SQL code blocks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#toml-class_method" title="toml (class method)">.<strong>toml</strong>  &#x21d2; FencedCodeBlockDetector </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a detector for TOML code blocks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#typescript-class_method" title="typescript (class method)">.<strong>typescript</strong>  &#x21d2; FencedCodeBlockDetector </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a detector for TypeScript code blocks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#yaml-class_method" title="yaml (class method)">.<strong>yaml</strong>  &#x21d2; FencedCodeBlockDetector </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a detector for YAML code blocks.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#detect_all-instance_method" title="#detect_all (instance method)">#<strong>detect_all</strong>(source)  &#x21d2; Array&lt;Region&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Detects all fenced code blocks with the configured language.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(language, aliases: [])  &#x21d2; FencedCodeBlockDetector </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new detector for the specified language.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A description of this detector.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#matches_language%3F-instance_method" title="#matches_language? (instance method)">#<strong>matches_language?</strong>(lang)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check if a language identifier matches this detector.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#region_type-instance_method" title="#region_type (instance method)">#<strong>region_type</strong>  &#x21d2; Symbol </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The region type (e.g., :ruby_code_block).</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="RegionDetectorBase.html" title="Ast::Merge::RegionDetectorBase (class)">RegionDetectorBase</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="RegionDetectorBase.html#name-instance_method" title="Ast::Merge::RegionDetectorBase#name (method)">#name</a></span>, <span class='object_link'><a href="RegionDetectorBase.html#strip_delimiters%3F-instance_method" title="Ast::Merge::RegionDetectorBase#strip_delimiters? (method)">#strip_delimiters?</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(language, aliases: [])  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new detector for the specified language.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>language</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The language identifier (e.g., “ruby”, “json”)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>aliases</span>
      
      
        <span class='type'>(<tt>Array&lt;String, Symbol&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Alternative identifiers (e.g., [“rb”] for ruby)</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136
137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 134</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_language'>language</span><span class='comma'>,</span> <span class='label'>aliases:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='ivar'>@language</span> <span class='op'>=</span> <span class='id identifier rubyid_language'>language</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
  <span class='ivar'>@aliases</span> <span class='op'>=</span> <span class='id identifier rubyid_aliases'>aliases</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='rbrace'>}</span>
  <span class='ivar'>@all_identifiers</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='ivar'>@language</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='ivar'>@aliases</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="aliases-instance_method">
  
    #<strong>aliases</strong>  &#x21d2; <tt>Array&lt;String&gt;</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns Alternative language identifiers.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Alternative language identifiers</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 128</span>

<span class='kw'>def</span> <span class='id identifier rubyid_aliases'>aliases</span>
  <span class='ivar'>@aliases</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="language-instance_method">
  
    #<strong>language</strong>  &#x21d2; <tt>String</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The primary language identifier.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The primary language identifier</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 125</span>

<span class='kw'>def</span> <span class='id identifier rubyid_language'>language</span>
  <span class='ivar'>@language</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="bash-class_method">
  
    .<strong>bash</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a detector for Bash/Shell code blocks.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 283</span>

<span class='kw'>def</span> <span class='id identifier rubyid_bash'>bash</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bash</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>aliases:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sh</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>shell</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>zsh</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="css-class_method">
  
    .<strong>css</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a detector for CSS code blocks.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


301
302
303</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 301</span>

<span class='kw'>def</span> <span class='id identifier rubyid_css'>css</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>css</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="html-class_method">
  
    .<strong>html</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a detector for HTML code blocks.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


295
296
297</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 295</span>

<span class='kw'>def</span> <span class='id identifier rubyid_html'>html</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="javascript-class_method">
  
    .<strong>javascript</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a detector for JavaScript code blocks.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


265
266
267</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 265</span>

<span class='kw'>def</span> <span class='id identifier rubyid_javascript'>javascript</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>javascript</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>aliases:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>js</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="json-class_method">
  
    .<strong>json</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a detector for JSON code blocks.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


241
242
243</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 241</span>

<span class='kw'>def</span> <span class='id identifier rubyid_json'>json</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>json</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="markdown-class_method">
  
    .<strong>markdown</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a detector for Markdown code blocks (nested markdown).</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


307
308
309</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 307</span>

<span class='kw'>def</span> <span class='id identifier rubyid_markdown'>markdown</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>markdown</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>aliases:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>md</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mermaid-class_method">
  
    .<strong>mermaid</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a detector for Mermaid diagram blocks.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


259
260
261</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 259</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mermaid'>mermaid</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mermaid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="python-class_method">
  
    .<strong>python</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a detector for Python code blocks.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


277
278
279</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 277</span>

<span class='kw'>def</span> <span class='id identifier rubyid_python'>python</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>python</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>aliases:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>py</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ruby-class_method">
  
    .<strong>ruby</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a detector for Ruby code blocks.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


235
236
237</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 235</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ruby'>ruby</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>aliases:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sql-class_method">
  
    .<strong>sql</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a detector for SQL code blocks.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


289
290
291</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 289</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sql'>sql</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sql</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="toml-class_method">
  
    .<strong>toml</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a detector for TOML code blocks.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


253
254
255</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 253</span>

<span class='kw'>def</span> <span class='id identifier rubyid_toml'>toml</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>toml</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="typescript-class_method">
  
    .<strong>typescript</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a detector for TypeScript code blocks.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


271
272
273</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 271</span>

<span class='kw'>def</span> <span class='id identifier rubyid_typescript'>typescript</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>typescript</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>aliases:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ts</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="yaml-class_method">
  
    .<strong>yaml</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a detector for YAML code blocks.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Ast::Merge::FencedCodeBlockDetector (class)">FencedCodeBlockDetector</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


247
248
249</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 247</span>

<span class='kw'>def</span> <span class='id identifier rubyid_yaml'>yaml</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>yaml</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>aliases:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>yml</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="detect_all-instance_method">
  
    #<strong>detect_all</strong>(source)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Region.html" title="Ast::Merge::Region (class)">Region</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Detects all fenced code blocks with the configured language.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>source</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The full document content</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Region.html" title="Ast::Merge::Region (class)">Region</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>All detected code blocks, sorted by start_line</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 158</span>

<span class='kw'>def</span> <span class='id identifier rubyid_detect_all'>detect_all</span><span class='lparen'>(</span><span class='id identifier rubyid_source'>source</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_regions'>regions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_lines'>lines</span> <span class='op'>=</span> <span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_lines'>lines</span>
  <span class='id identifier rubyid_in_block'>in_block</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_start_line'>start_line</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_content_lines'>content_lines</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_current_language'>current_language</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_fence_char'>fence_char</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_fence_length'>fence_length</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_indent'>indent</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_lines'>lines</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='comma'>,</span> <span class='id identifier rubyid_idx'>idx</span><span class='op'>|</span>
    <span class='id identifier rubyid_line_num'>line_num</span> <span class='op'>=</span> <span class='id identifier rubyid_idx'>idx</span> <span class='op'>+</span> <span class='int'>1</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_in_block'>in_block</span>
      <span class='comment'># Match opening fence: ```lang or ~~~lang (optionally indented)
</span>      <span class='id identifier rubyid_match'>match</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(\s*)(`{3,}|~{3,})(\w*)\s*$</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_match'>match</span>
        <span class='id identifier rubyid_indent'>indent</span> <span class='op'>=</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_fence'>fence</span> <span class='op'>=</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_lang'>lang</span> <span class='op'>=</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>

        <span class='kw'>if</span> <span class='ivar'>@all_identifiers</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_lang'>lang</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_in_block'>in_block</span> <span class='op'>=</span> <span class='kw'>true</span>
          <span class='id identifier rubyid_start_line'>start_line</span> <span class='op'>=</span> <span class='id identifier rubyid_line_num'>line_num</span>
          <span class='id identifier rubyid_content_lines'>content_lines</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_current_language'>current_language</span> <span class='op'>=</span> <span class='id identifier rubyid_lang'>lang</span>
          <span class='id identifier rubyid_fence_char'>fence_char</span> <span class='op'>=</span> <span class='id identifier rubyid_fence'>fence</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_fence_length'>fence_length</span> <span class='op'>=</span> <span class='id identifier rubyid_fence'>fence</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_indent'>indent</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_fence_char'>fence_char</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>{</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fence_length'>fence_length</span><span class='embexpr_end'>}</span><span class='tstring_content'>,}\s*$</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
      <span class='comment'># Match closing fence (must use same char, same indent, and at least same length)
</span>      <span class='id identifier rubyid_opening_fence'>opening_fence</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fence_char'>fence_char</span> <span class='op'>*</span> <span class='id identifier rubyid_fence_length'>fence_length</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_current_language'>current_language</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_closing_fence'>closing_fence</span> <span class='op'>=</span> <span class='id identifier rubyid_fence_char'>fence_char</span> <span class='op'>*</span> <span class='id identifier rubyid_fence_length'>fence_length</span>

      <span class='id identifier rubyid_regions'>regions</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_build_region'>build_region</span><span class='lparen'>(</span>
        <span class='label'>type:</span> <span class='id identifier rubyid_region_type'>region_type</span><span class='comma'>,</span>
        <span class='label'>content:</span> <span class='id identifier rubyid_content_lines'>content_lines</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='comma'>,</span>
        <span class='label'>start_line:</span> <span class='id identifier rubyid_start_line'>start_line</span><span class='comma'>,</span>
        <span class='label'>end_line:</span> <span class='id identifier rubyid_line_num'>line_num</span><span class='comma'>,</span>
        <span class='label'>delimiters:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_opening_fence'>opening_fence</span><span class='comma'>,</span> <span class='id identifier rubyid_closing_fence'>closing_fence</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='label'>metadata:</span> <span class='lbrace'>{</span><span class='label'>language:</span> <span class='id identifier rubyid_current_language'>current_language</span><span class='comma'>,</span> <span class='label'>indent:</span> <span class='id identifier rubyid_indent'>indent</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='id identifier rubyid_indent'>indent</span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='rparen'>)</span>
      <span class='id identifier rubyid_in_block'>in_block</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='id identifier rubyid_start_line'>start_line</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_content_lines'>content_lines</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_current_language'>current_language</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_fence_char'>fence_char</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_fence_length'>fence_length</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_indent'>indent</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='comment'># Accumulate content lines (strip the indent if present)
</span>      <span class='id identifier rubyid_content_lines'>content_lines</span> <span class='op'>&lt;&lt;</span> <span class='kw'>if</span> <span class='id identifier rubyid_indent'>indent</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_line'>line</span>
      <span class='kw'>else</span>
        <span class='comment'># Strip the common indent from content lines
</span>        <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_indent'>indent</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Note: Unclosed blocks are ignored (no region created)
</span>  <span class='id identifier rubyid_regions'>regions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-instance_method">
  
    #<strong>inspect</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns A description of this detector.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A description of this detector</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


227
228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 227</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
  <span class='id identifier rubyid_aliases_str'>aliases_str</span> <span class='op'>=</span> <span class='ivar'>@aliases</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> aliases=</span><span class='embexpr_beg'>#{</span><span class='ivar'>@aliases</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> language=</span><span class='embexpr_beg'>#{</span><span class='ivar'>@language</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_aliases_str'>aliases_str</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="matches_language?-instance_method">
  
    #<strong>matches_language?</strong>(lang)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check if a language identifier matches this detector.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>lang</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The language identifier to check</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>true if the language matches</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 150</span>

<span class='kw'>def</span> <span class='id identifier rubyid_matches_language?'>matches_language?</span><span class='lparen'>(</span><span class='id identifier rubyid_lang'>lang</span><span class='rparen'>)</span>
  <span class='ivar'>@all_identifiers</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_lang'>lang</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="region_type-instance_method">
  
    #<strong>region_type</strong>  &#x21d2; <tt>Symbol</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The region type (e.g., :ruby_code_block).</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The region type (e.g., :ruby_code_block)</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ast/merge/fenced_code_block_detector.rb', line 142</span>

<span class='kw'>def</span> <span class='id identifier rubyid_region_type'>region_type</span>
  <span class='symbol'>:&quot;#{</span><span class='ivar'>@language</span><span class='embexpr_end'>}</span><span class='tstring_content'>_code_block</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Dec 18 16:26:22 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-3.4.7).
</div>

    </div>
  </body>
</html>