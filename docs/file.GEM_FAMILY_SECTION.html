<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: GEM_FAMILY_SECTION
  
    &mdash; Documentation by YARD 0.9.38
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "GEM_FAMILY_SECTION";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: GEM_FAMILY_SECTION</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'><h3 id="the--merge-gem-family">The <code>*-merge</code> Gem Family</h3>

<p>The <code>*-merge</code> gem family provides intelligent, AST-based merging for various file formats. At the foundation is <a href="https://github.com/kettle-rb/tree_haver">tree_haver</a>, which provides a unified cross-Ruby parsing API that works seamlessly across MRI, JRuby, and TruffleRuby.</p>

<table>
  <thead>
    <tr>
      <th>Gem</th>
      <th style="text-align: center">Version / CI</th>
      <th>Language<br>/ Format</th>
      <th>Parser Backend(s)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://github.com/kettle-rb/tree_haver">tree_haver</a></td>
      <td style="text-align: center">
<a href="https://bestgems.org/gems/tree_haver"><img src="https://img.shields.io/gem/v/tree_haver.svg" alt="Version"></a> <br> <a href="https://github.com/kettle-rb/tree_haver/actions/workflows/current.yml"><img src="https://github.com/kettle-rb/tree_haver/actions/workflows/current.yml/badge.svg" alt="CI"></a>
</td>
      <td>Multi</td>
      <td>Supported Backends: MRI C, Rust, FFI, Java, Prism, Psych, Commonmarker, Markly, Citrus, Parslet</td>
      <td>
<strong>Foundation</strong>: Cross-Ruby adapter for parsing libraries (like Faraday for HTTP)</td>
    </tr>
    <tr>
      <td><a href="https://github.com/kettle-rb/ast-merge">ast-merge</a></td>
      <td style="text-align: center">
<a href="https://bestgems.org/gems/ast-merge"><img src="https://img.shields.io/gem/v/ast-merge.svg" alt="Version"></a> <br> <a href="https://github.com/kettle-rb/ast-merge/actions/workflows/current.yml"><img src="https://github.com/kettle-rb/ast-merge/actions/workflows/current.yml/badge.svg" alt="CI"></a>
</td>
      <td>Text</td>
      <td>internal</td>
      <td>
<strong>Infrastructure</strong>: Shared base classes and merge logic for all <code>*-merge</code> gems</td>
    </tr>
    <tr>
      <td><a href="https://github.com/kettle-rb/bash-merge">bash-merge</a></td>
      <td style="text-align: center">
<a href="https://bestgems.org/gems/bash-merge"><img src="https://img.shields.io/gem/v/bash-merge.svg" alt="Version"></a> <br> <a href="https://github.com/kettle-rb/bash-merge/actions/workflows/current.yml"><img src="https://github.com/kettle-rb/bash-merge/actions/workflows/current.yml/badge.svg" alt="CI"></a>
</td>
      <td>Bash</td>
      <td>
<a href="https://github.com/tree-sitter/tree-sitter-bash">tree-sitter-bash</a> (via tree_haver)</td>
      <td>Smart merge for Bash scripts</td>
    </tr>
    <tr>
      <td><a href="https://github.com/kettle-rb/commonmarker-merge">commonmarker-merge</a></td>
      <td style="text-align: center">
<a href="https://bestgems.org/gems/commonmarker-merge"><img src="https://img.shields.io/gem/v/commonmarker-merge.svg" alt="Version"></a> <br> <a href="https://github.com/kettle-rb/commonmarker-merge/actions/workflows/current.yml"><img src="https://github.com/kettle-rb/commonmarker-merge/actions/workflows/current.yml/badge.svg" alt="CI"></a>
</td>
      <td>Markdown</td>
      <td>
<a href="https://github.com/gjtorikian/commonmarker">Commonmarker</a> (via tree_haver)</td>
      <td>Smart merge for Markdown (CommonMark via comrak Rust)</td>
    </tr>
    <tr>
      <td><a href="https://github.com/kettle-rb/dotenv-merge">dotenv-merge</a></td>
      <td style="text-align: center">
<a href="https://bestgems.org/gems/dotenv-merge"><img src="https://img.shields.io/gem/v/dotenv-merge.svg" alt="Version"></a> <br> <a href="https://github.com/kettle-rb/dotenv-merge/actions/workflows/current.yml"><img src="https://github.com/kettle-rb/dotenv-merge/actions/workflows/current.yml/badge.svg" alt="CI"></a>
</td>
      <td>Dotenv</td>
      <td>internal</td>
      <td>Smart merge for <code>.env</code> files</td>
    </tr>
    <tr>
      <td><a href="https://github.com/kettle-rb/json-merge">json-merge</a></td>
      <td style="text-align: center">
<a href="https://bestgems.org/gems/json-merge"><img src="https://img.shields.io/gem/v/json-merge.svg" alt="Version"></a> <br> <a href="https://github.com/kettle-rb/json-merge/actions/workflows/current.yml"><img src="https://github.com/kettle-rb/json-merge/actions/workflows/current.yml/badge.svg" alt="CI"></a>
</td>
      <td>JSON</td>
      <td>
<a href="https://github.com/tree-sitter/tree-sitter-json">tree-sitter-json</a> (via tree_haver)</td>
      <td>Smart merge for JSON files</td>
    </tr>
    <tr>
      <td><a href="https://github.com/kettle-rb/jsonc-merge">jsonc-merge</a></td>
      <td style="text-align: center">
<a href="https://bestgems.org/gems/jsonc-merge"><img src="https://img.shields.io/gem/v/jsonc-merge.svg" alt="Version"></a> <br> <a href="https://github.com/kettle-rb/jsonc-merge/actions/workflows/current.yml"><img src="https://github.com/kettle-rb/jsonc-merge/actions/workflows/current.yml/badge.svg" alt="CI"></a>
</td>
      <td>JSONC</td>
      <td>
<a href="https://gitlab.com/WhyNotHugo/tree-sitter-jsonc">tree-sitter-jsonc</a> (via tree_haver)</td>
      <td>‚ö†Ô∏è Proof of concept; Smart merge for JSON with Comments</td>
    </tr>
    <tr>
      <td><a href="https://github.com/kettle-rb/markdown-merge">markdown-merge</a></td>
      <td style="text-align: center">
<a href="https://bestgems.org/gems/markdown-merge"><img src="https://img.shields.io/gem/v/markdown-merge.svg" alt="Version"></a> <br> <a href="https://github.com/kettle-rb/markdown-merge/actions/workflows/current.yml"><img src="https://github.com/kettle-rb/markdown-merge/actions/workflows/current.yml/badge.svg" alt="CI"></a>
</td>
      <td>Markdown</td>
      <td>
<a href="https://github.com/gjtorikian/commonmarker">Commonmarker</a> / <a href="https://github.com/ioquatix/markly">Markly</a> (via tree_haver), <a href="https://github.com/kschiess/parslet">Parslet</a>
</td>
      <td>
<strong>Foundation</strong>: Shared base for Markdown mergers with inner code block merging</td>
    </tr>
    <tr>
      <td><a href="https://github.com/kettle-rb/markly-merge">markly-merge</a></td>
      <td style="text-align: center">
<a href="https://bestgems.org/gems/markly-merge"><img src="https://img.shields.io/gem/v/markly-merge.svg" alt="Version"></a> <br> <a href="https://github.com/kettle-rb/markly-merge/actions/workflows/current.yml"><img src="https://github.com/kettle-rb/markly-merge/actions/workflows/current.yml/badge.svg" alt="CI"></a>
</td>
      <td>Markdown</td>
      <td>
<a href="https://github.com/ioquatix/markly">Markly</a> (via tree_haver)</td>
      <td>Smart merge for Markdown (CommonMark via cmark-gfm C)</td>
    </tr>
    <tr>
      <td><a href="https://github.com/kettle-rb/prism-merge">prism-merge</a></td>
      <td style="text-align: center">
<a href="https://bestgems.org/gems/prism-merge"><img src="https://img.shields.io/gem/v/prism-merge.svg" alt="Version"></a> <br> <a href="https://github.com/kettle-rb/prism-merge/actions/workflows/current.yml"><img src="https://github.com/kettle-rb/prism-merge/actions/workflows/current.yml/badge.svg" alt="CI"></a>
</td>
      <td>Ruby</td>
      <td>
<a href="https://github.com/ruby/prism">Prism</a> (<code>prism</code> std lib gem)</td>
      <td>Smart merge for Ruby source files</td>
    </tr>
    <tr>
      <td><a href="https://github.com/kettle-rb/psych-merge">psych-merge</a></td>
      <td style="text-align: center">
<a href="https://bestgems.org/gems/psych-merge"><img src="https://img.shields.io/gem/v/psych-merge.svg" alt="Version"></a> <br> <a href="https://github.com/kettle-rb/psych-merge/actions/workflows/current.yml"><img src="https://github.com/kettle-rb/psych-merge/actions/workflows/current.yml/badge.svg" alt="CI"></a>
</td>
      <td>YAML</td>
      <td>
<a href="https://github.com/ruby/psych">Psych</a> (<code>psych</code> std lib gem)</td>
      <td>Smart merge for YAML files</td>
    </tr>
    <tr>
      <td><a href="https://github.com/kettle-rb/rbs-merge">rbs-merge</a></td>
      <td style="text-align: center">
<a href="https://bestgems.org/gems/rbs-merge"><img src="https://img.shields.io/gem/v/rbs-merge.svg" alt="Version"></a> <br> <a href="https://github.com/kettle-rb/rbs-merge/actions/workflows/current.yml"><img src="https://github.com/kettle-rb/rbs-merge/actions/workflows/current.yml/badge.svg" alt="CI"></a>
</td>
      <td>RBS</td>
      <td>
<a href="https://github.com/joker1007/tree-sitter-rbs">tree-sitter-bash</a> (via tree_haver), <a href="https://github.com/ruby/rbs">RBS</a> (<code>rbs</code> std lib gem)</td>
      <td>Smart merge for Ruby type signatures</td>
    </tr>
    <tr>
      <td><a href="https://github.com/kettle-rb/toml-merge">toml-merge</a></td>
      <td style="text-align: center">
<a href="https://bestgems.org/gems/toml-merge"><img src="https://img.shields.io/gem/v/toml-merge.svg" alt="Version"></a> <br> <a href="https://github.com/kettle-rb/toml-merge/actions/workflows/current.yml"><img src="https://github.com/kettle-rb/toml-merge/actions/workflows/current.yml/badge.svg" alt="CI"></a>
</td>
      <td>TOML</td>
      <td>
<a href="https://github.com/jm/toml">Parslet + toml</a>, <a href="https://github.com/emancu/toml-rb">Citrus + toml-rb</a>, <a href="https://github.com/tree-sitter-grammars/tree-sitter-toml">tree-sitter-toml</a> (all via tree_haver)</td>
      <td>Smart merge for TOML files</td>
    </tr>
  </tbody>
</table>

<h4 id="backend-platform-compatibility">Backend Platform Compatibility</h4>

<p>tree_haver supports multiple parsing backends, but not all backends work on all Ruby platforms:</p>

<table>
  <thead>
    <tr>
      <th>Platform üëâÔ∏è<br> TreeHaver Backend üëáÔ∏è</th>
      <th style="text-align: center">MRI</th>
      <th style="text-align: center">JRuby</th>
      <th style="text-align: center">TruffleRuby</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
<strong>MRI</strong> (<a href="https://github.com/Faveod/ruby-tree-sitter">ruby_tree_sitter</a>)</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚ùå</td>
      <td style="text-align: center">‚ùå</td>
      <td>C extension, MRI only</td>
    </tr>
    <tr>
      <td>
<strong>Rust</strong> (<a href="https://github.com/joker1007/tree_stump">tree_stump</a>)</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚ùå</td>
      <td style="text-align: center">‚ùå</td>
      <td>Rust extension via magnus/rb-sys, MRI only</td>
    </tr>
    <tr>
      <td>
<strong>FFI</strong> (<a href="https://github.com/ffi/ffi">ffi</a>)</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚ùå</td>
      <td>TruffleRuby‚Äôs FFI doesn‚Äôt support <code>STRUCT_BY_VALUE</code>
</td>
    </tr>
    <tr>
      <td>
<strong>Java</strong> (<a href="https://central.sonatype.com/artifact/io.github.tree-sitter/jtreesitter">jtreesitter</a>)</td>
      <td style="text-align: center">‚ùå</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚ùå</td>
      <td>JRuby only, requires grammar JARs</td>
    </tr>
    <tr>
      <td>
<strong>Prism</strong> (<a href="https://github.com/ruby/prism">prism</a>)</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚úÖ</td>
      <td>Ruby parsing, stdlib in Ruby 3.4+</td>
    </tr>
    <tr>
      <td>
<strong>Psych</strong> (<a href="https://github.com/ruby/psych">psych</a>)</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚úÖ</td>
      <td>YAML parsing, stdlib</td>
    </tr>
    <tr>
      <td>
<strong>Citrus</strong> (<a href="https://github.com/mjackson/citrus">citrus</a>)</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚úÖ</td>
      <td>Pure Ruby PEG parser, no native dependencies</td>
    </tr>
    <tr>
      <td>
<strong>Parslet</strong> (<a href="https://github.com/kschiess/parslet">parslet</a>)</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚úÖ</td>
      <td>Pure Ruby PEG parser, no native dependencies</td>
    </tr>
    <tr>
      <td>
<strong>Commonmarker</strong> (<a href="https://github.com/gjtorikian/commonmarker">commonmarker</a>)</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚ùå</td>
      <td style="text-align: center">‚ùì</td>
      <td>Rust extension for Markdown (via <a href="https://github.com/kettle-rb/commonmarker-merge">commonmarker-merge</a>)</td>
    </tr>
    <tr>
      <td>
<strong>Markly</strong> (<a href="https://github.com/ioquatix/markly">markly</a>)</td>
      <td style="text-align: center">‚úÖ</td>
      <td style="text-align: center">‚ùå</td>
      <td style="text-align: center">‚ùì</td>
      <td>C extension for Markdown  (via <a href="https://github.com/kettle-rb/markly-merge">markly-merge</a>)</td>
    </tr>
  </tbody>
</table>

<p><strong>Legend</strong>: ‚úÖ = Works, ‚ùå = Does not work, ‚ùì = Untested</p>

<p><strong>Why some backends don‚Äôt work on certain platforms</strong>:</p>

<ul>
  <li>
<strong>JRuby</strong>: Runs on the JVM; cannot load native C/Rust extensions (<code>.so</code> files)</li>
  <li>
<strong>TruffleRuby</strong>: Has C API emulation via Sulong/LLVM, but it doesn‚Äôt expose all MRI internals that native extensions require (e.g., <code>RBasic.flags</code>, <code>rb_gc_writebarrier</code>)</li>
  <li>
<strong>FFI on TruffleRuby</strong>: TruffleRuby‚Äôs FFI implementation doesn‚Äôt support returning structs by value, which tree-sitter‚Äôs C API requires</li>
</ul>

<p><strong>Example implementations</strong> for the gem templating use case:</p>

<table>
  <thead>
    <tr>
      <th>Gem</th>
      <th>Purpose</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://github.com/kettle-rb/kettle-dev">kettle-dev</a></td>
      <td>Gem Development</td>
      <td>Gem templating tool using <code>*-merge</code> gems</td>
    </tr>
    <tr>
      <td><a href="https://github.com/kettle-rb/kettle-jem">kettle-jem</a></td>
      <td>Gem Templating</td>
      <td>Gem template library with smart merge support</td>
    </tr>
  </tbody>
</table>

</div></div>

      <div id="footer">
  Generated on Tue Jan 20 13:15:54 2026 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-4.0.0).
</div>

    </div>
  </body>
</html>