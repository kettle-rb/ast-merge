#!/usr/bin/env ruby
# frozen_string_literal: true

# Update the Gem Family section in all README files that contain it.
#
# This is a convenience wrapper around exe/ast-merge-recipe that runs
# the gem_family_section recipe.
#
# Usage: bin/update_gem_family_section [options]
#
# Options are passed through to exe/ast-merge-recipe:
#   -n, --dry-run    Show what would be changed without writing files
#   -v, --verbose    Show detailed merge information
#   -h, --help       Show this help message

# Determine paths
script_dir = File.expand_path("..", __dir__)
exe_path = File.join(script_dir, "exe", "ast-merge-recipe")
recipe_path = File.join(script_dir, ".merge-recipes", "gem_family_section.yml")

# Validate paths exist
unless File.exist?(exe_path)
  $stderr.puts "ERROR: exe/ast-merge-recipe not found at #{exe_path}"
  exit 1
end

unless File.exist?(recipe_path)
  $stderr.puts "ERROR: Recipe not found at #{recipe_path}"
  exit 1
end

# Execute the recipe runner with all arguments passed through
exec(exe_path, recipe_path, *ARGV)
